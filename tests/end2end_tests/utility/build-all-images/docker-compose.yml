version: '3'

services:
  image-runtime-local:
    build:
      context: ../../../../
      dockerfile: test/end2end_tests/image/Dockerfile
      target: runtime-local
    image: atsigncompany/sshnp-e2e-runtime:local
    deploy:
      mode: replicated
      replicas: 0
  image-runtime-trunk:
    build:
      context: ../../image/
      dockerfile: ./Dockerfile
      target: runtime-branch
      args:
        - branch=trunk
    image: atsigncompany/sshnp-e2e-runtime:branch-trunk
    deploy:
      mode: replicated
      replicas: 0
  image-runtime-release:
    build:
      context: ../../image/
      dockerfile: ./Dockerfile
      target: runtime-release
    image: atsigncompany/sshnp-e2e-runtime:release
    deploy:
      mode: replicated
      replicas: 0